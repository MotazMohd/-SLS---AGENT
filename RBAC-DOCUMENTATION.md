# SALIS AUTO - Role-Based Access Control (RBAC) System

## Overview

The SALIS AUTO platform includes a comprehensive Role-Based Access Control (RBAC) system with **24 professional role templates**, **141+ permission resources**, and granular access control across all 141+ modules.

## Current System Status ✅

- **Total Users**: 270
- **Staff with Roles**: 70 (assigned to professional departments)
- **Customer Accounts**: 200 (use customer portal)
- **Total Roles**: 24 professional roles
- **Garages**: 2 (AutoFix Garage, QuickCare Motors)
- **Branches**: Multiple locations across both garages

## Standard Role Templates

### 1. **System Administrator**
- **Scope**: System-wide (SYSTEM)
- **Access**: Full unrestricted access to all features and settings
- **Current Users**: 1 (System Administrator)
- **Best For**: IT administrators and super users who manage the entire platform
- **Login**: admin@salisauto.com / password123

### 2. **Business Owner**
- **Scope**: Garage-wide (GARAGE)
- **Access**: Full access to all garage operations, financials, analytics, and business intelligence
- **Current Users**: 2 (Raphaelle Boyle, Larissa Muller)
- **Key Permissions**: Financial management, user management, franchise oversight, complete reporting
- **Best For**: Garage owners and top executives

### 3. **General Manager**
- **Scope**: Garage-wide (GARAGE)
- **Access**: Comprehensive management access (excluding sensitive financial settings)
- **Current Users**: 2 (Elmira Frami, Jerrell Raynor)
- **Key Permissions**: Service operations, staff management, approvals, reporting
- **Best For**: Day-to-day operations managers

### 4. **Service Manager**
- **Scope**: Branch-level (BRANCH)
- **Access**: Complete service operations and quality control
- **Current Users**: 2 (Isaias Schumm, Felicita Jerde)
- **Key Permissions**: Job cards, technician assignment, inspections, diagnostics, quality management
- **Best For**: Workshop supervisors and service department heads

### 5. **Service Advisor**
- **Scope**: Branch-level (BRANCH)
- **Access**: Customer-facing service operations
- **Current Users**: 4 (Sasha Emard, Nettie Schowalter, Christian Breitenberg, Shakira Predovic)
- **Key Permissions**: Customer management, appointments, job cards, estimates, invoicing
- **Best For**: Customer service representatives and service advisors

### 6. **Parts Manager**
- **Scope**: Branch-level (BRANCH)
- **Access**: Complete inventory and procurement management
- **Current Users**: 1 (Fannie Deckow-Howell)
- **Key Permissions**: Inventory control, purchase orders, suppliers, parts forecasting
- **Best For**: Spare parts store keepers and parts department managers

### 7. **Lead Technician**
- **Scope**: Branch-level (BRANCH)
- **Access**: Senior technician with additional supervisory capabilities
- **Current Users**: 0 (available for assignment)
- **Key Permissions**: Job assignments, quality reviews, all diagnostic tools, training content
- **Best For**: Senior technicians and team leads

### 8. **Technician**
- **Scope**: Branch-level (BRANCH)
- **Access**: Assigned job cards and technical operations
- **Current Users**: 30 (distributed across both garages)
- **Key Permissions**: Own job cards, diagnostics, inspections, technician portal, knowledge base
- **Best For**: Service technicians and mechanics

### 9. **Finance Manager**
- **Scope**: Garage-wide (GARAGE)
- **Access**: Complete financial operations and reporting
- **Current Users**: 2 (Leila Senger, Adam Johnston)
- **Key Permissions**: Invoicing, payments, payroll, accounting integration, profit analysis
- **Best For**: Financial controllers and CFOs

### 10. **Accountant**
- **Scope**: Garage-wide (GARAGE)
- **Access**: Day-to-day accounting operations
- **Current Users**: 2 (Edgar Heaney, Gus Gulgowski)
- **Key Permissions**: Invoicing, payment processing, expense tracking, financial reports
- **Best For**: Accounting staff and financial assistants

### 11. **HR Manager**
- **Scope**: Garage-wide (GARAGE)
- **Access**: Complete human resources management
- **Current Users**: 2 (Hugh Rohan, Jace Schamberger)
- **Key Permissions**: Staff management, payroll, performance reviews, training, compliance
- **Best For**: Human resources managers

### 12. **Marketing Manager**
- **Scope**: Garage-wide (GARAGE)
- **Access**: Marketing campaigns and customer engagement
- **Current Users**: 1 (Samson Franecki)
- **Key Permissions**: Email campaigns, social media, loyalty programs, reviews management
- **Best For**: Marketing and customer experience managers

### 13. **Customer Service Representative**
- **Scope**: Branch-level (BRANCH)
- **Access**: Customer interactions and basic service tracking
- **Current Users**: 3 (Chelsey Dicki-Little, Raina Ebert, Ariel Bernier)
- **Key Permissions**: Customer management, appointments, service tracking, chat support
- **Best For**: Customer service agents and support staff

### 14. **Receptionist**
- **Scope**: Branch-level (BRANCH)
- **Access**: Front desk operations
- **Current Users**: 2 (Jason Jacobson, Dax Jacobson)
- **Key Permissions**: Appointments, customer check-in, basic vehicle entry
- **Best For**: Front desk and reception staff

### 15. **Quality Control Inspector**
- **Scope**: Branch-level (BRANCH)
- **Access**: Quality assurance and inspections
- **Current Users**: 2 (Evalyn Shanahan, Halle Renner)
- **Key Permissions**: Vehicle inspections, quality management, job card review, compliance
- **Best For**: QA inspectors and compliance officers

### 16. **Warehouse Manager**
- **Scope**: Garage-wide (GARAGE)
- **Access**: Warehouse and logistics operations
- **Current Users**: 2 (Xavier Pollich-Bahringer, Karen Lowe)
- **Key Permissions**: Inventory management, vehicle storage, parts logistics
- **Best For**: Warehouse and logistics managers

### 17. **Franchise Manager**
- **Scope**: Franchise-wide (FRANCHISE)
- **Access**: Multi-branch oversight and enterprise features
- **Current Users**: 0 (available for franchise operations)
- **Key Permissions**: Franchise management, multi-branch reporting, enterprise settings
- **Best For**: Franchise operators and regional managers

### 18. **Business Analyst**
- **Scope**: Garage-wide (GARAGE)
- **Access**: Read-only access to all data and reports
- **Current Users**: 0 (available for assignment)
- **Key Permissions**: View all reports, analytics, and business intelligence (no edit/delete)
- **Best For**: Data analysts and consultants

### 19. **Call Center Agent**
- **Scope**: Branch-level (BRANCH)
- **Access**: Customer call handling and appointment scheduling
- **Current Users**: 2 (Ethelyn Leffler, Annamarie Bartell)
- **Key Permissions**: Call center operations, appointments, customer info, service status
- **Best For**: Call center and phone support staff

### 20. **Apprentice Technician**
- **Scope**: Branch-level (BRANCH)
- **Access**: Limited technician access for learning
- **Current Users**: 0 (available for trainee programs)
- **Key Permissions**: View assigned jobs, read-only diagnostics, training materials
- **Best For**: Entry-level and trainee technicians

### 21. **Garage Manager**
- **Scope**: Garage-wide (GARAGE)
- **Access**: Comprehensive garage operations management
- **Current Users**: 10 (distributed across both garages)
- **Key Permissions**: Garage operations, staff oversight, service coordination, reporting
- **Best For**: Garage location managers and operational supervisors

### 22-24. **Additional Roles**
Other available roles for specific use cases:
- **Super Admin** (SYSTEM) - 1 user - Legacy admin role
- **Branch Manager** (BRANCH) - Available for assignment
- **Assistant** (BRANCH) - Available for general support tasks
- **Lead Technician** (BRANCH) - Available for senior technician promotions

## User Distribution by Role

| Role | Users | Scope | Department |
|------|-------|-------|------------|
| **Technician** | 30 | Branch | Service Operations |
| **Garage Manager** | 10 | Garage | Management |
| **Service Advisor** | 4 | Branch | Customer Service |
| **Customer Service Representative** | 3 | Branch | Customer Service |
| **Accountant** | 2 | Garage | Finance |
| **Business Owner** | 2 | Garage | Executive |
| **Call Center Agent** | 2 | Branch | Customer Service |
| **Finance Manager** | 2 | Garage | Finance |
| **General Manager** | 2 | Garage | Management |
| **HR Manager** | 2 | Garage | Human Resources |
| **Quality Control Inspector** | 2 | Branch | Quality Assurance |
| **Receptionist** | 2 | Branch | Front Desk |
| **Service Manager** | 2 | Branch | Service Operations |
| **Warehouse Manager** | 2 | Garage | Logistics |
| **Marketing Manager** | 1 | Garage | Marketing |
| **Parts Manager** | 1 | Branch | Parts & Inventory |
| **System Administrator** | 1 | System | IT Administration |

## Permission Categories

The system organizes permissions into **38 categories**:

1. **Dashboard & Overview** - Dashboard and KPI access
2. **Customer Management** - Customer profiles and relationships
3. **Appointments & Scheduling** - Appointment booking and calendar
4. **Vehicle Management** - Vehicle records and fleet operations
5. **Fleet Management** - Multi-vehicle fleet operations
6. **Job Cards & Service** - Service work orders and tasks
7. **Inspections & Quality** - Vehicle inspections and QA
8. **Diagnostics & OBD** - Diagnostic tools and OBD systems
9. **Parts & Inventory** - Parts and inventory control
10. **Suppliers & Procurement** - Supplier and vendor management
11. **Purchase Orders** - PO creation and approval
12. **Invoicing & Billing** - Invoice generation and management
13. **Payments & Transactions** - Payment processing and refunds
14. **Payroll & Expenses** - Payroll and expense tracking
15. **Accounting & Finance** - Financial management and accounting
16. **Reports & Analytics** - Standard reporting
17. **Business Intelligence** - Advanced analytics and BI
18. **Staff & HR Management** - Employee management
19. **Technician Management** - Technician-specific operations
20. **Performance Management** - Performance reviews and metrics
21. **Training & Certification** - Training programs and LMS
22. **Marketing & Campaigns** - Marketing automation
23. **Customer Loyalty** - Loyalty programs and referrals
24. **Reviews & Feedback** - Customer reviews and ratings
25. **Franchise Management** - Multi-location franchise ops
26. **Enterprise Features** - Advanced enterprise tools
27. **Compliance & Regulations** - Regulatory compliance
28. **Safety & Incidents** - Safety management
29. **Quality Management** - ISO and quality systems
30. **AI & Automation** - AI-powered features
31. **AI Chatbot & Assistant** - AI customer service
32. **Blockchain & Smart Contracts** - Blockchain features
33. **AR/VR & Emerging Tech** - Augmented/virtual reality
34. **IoT & Telematics** - IoT devices and fleet telematics
35. **System Administration** - System-wide settings
36. **Security & Access Control** - User and role management
37. **Integrations & APIs** - Third-party integrations
38. **Settings & Configuration** - General configuration

## Permission Actions

Each resource supports the following actions (where applicable):

- **create** - Create new records
- **read** - View and read records
- **update** - Modify existing records
- **delete** - Remove records
- **approve** - Approve requests or transactions
- **reject** - Reject requests
- **export** - Export data to files
- **import** - Import data from files
- **assign** - Assign tasks or resources
- **manage** - Full management access
- **view_all** - View all records (not just own)
- **view_own** - View only own records
- **edit_all** - Edit all records
- **edit_own** - Edit only own records
- **cancel** - Cancel operations
- **refund** - Process refunds
- **void** - Void transactions
- **print** - Print documents

## Key Features

### ✅ Granular Permissions
- **141+ resources** covering all system modules
- **18+ actions** for fine-grained control
- **2,500+ unique permissions** available

### ✅ Hierarchical Roles
- **System-level** (SYSTEM): Platform-wide access
- **Garage-level** (GARAGE): Single garage operations
- **Branch-level** (BRANCH): Specific branch operations
- **Franchise-level** (FRANCHISE): Multi-garage franchise management
- Permission overrides for specific users

### ✅ Multi-Branch Support
- Assign roles per branch
- Users can have different roles at different branches
- Franchise-wide role management

### ✅ Permission Overrides
- Grant or deny specific permissions to individual users
- Temporary permission grants with expiration dates
- Audit trail of all permission changes

## Database Structure

### Core Tables

**roles**
- Stores all role definitions
- Fields: id, name, scope, is_system_role, created_at

**permissions**
- Defines all possible system permissions
- Fields: id, resource, action, description, category, is_system_permission, created_at

**user_role_branch**
- Maps users to roles at specific branches
- Fields: id, user_id, role_id, branch_id, is_primary_role, assigned_at

**role_permissions**
- Maps permissions to roles
- Fields: id, role_id, permission_id, granted, created_at

**permission_overrides**
- User-specific permission overrides
- Fields: id, garage_id, user_id, resource, action, allowed, reason, created_by, expires_at, created_at

## Usage Examples

### Assigning Roles to Users
